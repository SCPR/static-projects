<!-- begin css  -->
<style type="text/css">
#map_container {width: 520px; height: 600px;}
#map_canvas {width:520px; height:600px;}
p {font-family: "Georgia",Times New Roman,Times,serif; font-size: 14px; font-weight: normal; line-height: 21px; margin-bottom: 18px;}
</style>
<!-- end css -->

<!-- begin scripts -->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="//use.typekit.net/air8rql.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAtS1OYyuRY0inb23BK0nuGId3FiOC6Rb8&sensor=false&region=us"></script>
<script type="text/javascript">

    var jqueryNoConflict = jQuery;
    var tableID = '1aOgARAl4h_0vUgK2YDCOmGnFsUrcEMOYqm8saHo';
    var locationColumn =  'location';
    var map;
    var layerl0;

    //begin main function
    jqueryNoConflict(document).ready(function(){
        createMap();
    });

    // begin function
    function createMap() {

        var centerCalif = new google.maps.LatLng(33.986608054508494, -118.16070556640625);
        map = new google.maps.Map(document.getElementById('map_canvas'), {
            center: centerCalif,
            zoom: 9,
            scrollwheel: false,
            draggable: true,
            mapTypeControl: false,
            navigationControl: true,
            streetViewControl: false,
            panControl: false,
            scaleControl: false,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.SMALL,
                position: google.maps.ControlPosition.RIGHT_TOP}
        });

        // Initialize ft layer
        layerl0 = new google.maps.FusionTablesLayer({
            query: {
                select: locationColumn,
                from: tableID
            },
            map: map,
            suppressInfoWindows: false,
            styleId: 2,
            templateId: 2
        });

    };
    // end function

    function changeMapl0() {
        var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
        layerl0.setOptions({
            query: {
                select: locationColumn,
                from: tableID,
                where: "'city' = '" + searchString + "'"
            }
        });
    };

</script>
<!-- end scripts -->

<!-- begin map container -->
<div id="map_container">

<!-- begin map data -->
<div id="map_data">
<h4>About this map</h4>
<p>Click on an icon to find Los Angeles County (green) or Orange County (red) Public Health Centers offering flu vaccinations.</p>
<p>The blue icons represent immunization clinics in Los Angeles County that provide no-cost or low-cost immunizations. Please call the clinic in advance to confirm whether flu vaccinations are offered, who is eligible, the cost of vaccination, and clinic hours. <a href="http://projects.scpr.org/static/maps/flu-clinics/"><em>View larger version</em></a>.</p>

    <div style="margin-top: 10px;">
      <label>Search By City</label>
      <select id="search-string-l0" onchange="changeMapl0(this.value);">
        <option value="">--Select--</option>
        <option value="Los Angeles">Los Angeles</option>
        <option value="Pomona">Pomona</option>
        <option value="El Monte">El Monte</option>
        <option value="Compton">Compton</option>
        <option value="Whittier">Whittier</option>
        <option value="Montebello">Montebello</option>
        <option value="Inglewood">Inglewood</option>
        <option value="Garden Grove">Garden Grove</option>
        <option value="West Covina">West Covina</option>
        <option value="Monrovia">Monrovia</option>
        <option value="Lancaster">Lancaster</option>
        <option value="Glendale">Glendale</option>
        <option value="Bellflower">Bellflower</option>
        <option value="San Gabriel">San Gabriel</option>
        <option value="Buena Park">Buena Park</option>
        <option value="Canyon Country">Canyon Country</option>
        <option value="Torrance">Torrance</option>
        <option value="Lynwood">Lynwood</option>
        <option value="South Gate">South Gate</option>
        <option value="Wilmington">Wilmington</option>
        <option value="Bell">Bell</option>
        <option value="Downey">Downey</option>
        <option value="Santa Monica">Santa Monica</option>
        <option value="Orange">Orange</option>
        <option value="Pacoima">Pacoima</option>
        <option value="Northridge">Northridge</option>
        <option value="Venice">Venice</option>
        <option value="Santa Clarita">Santa Clarita</option>
        <option value="Pico Rivera">Pico Rivera</option>
        <option value="Bell Gardens">Bell Gardens</option>
        <option value="Huntington Park">Huntington Park</option>
        <option value="Valencia">Valencia</option>
        <option value="Alhambra">Alhambra</option>
        <option value="Gardena">Gardena</option>
        <option value="Fullerton">Fullerton</option>
        <option value="La Puente">La Puente</option>
        <option value="La Habra">La Habra</option>
        <option value="North Hills">North Hills</option>
        <option value="Monterey Park">Monterey Park</option>
        <option value="North Hollywood">North Hollywood</option>
        <option value="Canoga Park">Canoga Park</option>
        <option value="Harbor City">Harbor City</option>
        <option value="Azusa">Azusa</option>
        <option value="Redondo Beach">Redondo Beach</option>
        <option value="San Juan Capistrano">San Juan Capistrano</option>
        <option value="Boyle Heights">Boyle Heights</option>
        <option value="Costa Mesa">Costa Mesa</option>
        <option value="Norwalk">Norwalk</option>
        <option value="Val Verde">Val Verde</option>
        <option value="Culver City">Culver City</option>
        <option value="Van Nuys">Van Nuys</option>
        <option value="Newhall">Newhall</option>
        <option value="Palmdale">Palmdale</option>
        <option value="Mission Hills">Mission Hills</option>
        <option value="Avalon">Avalon</option>
        <option value="Cudahy">Cudahy</option>
        <option value="San Pedro">San Pedro</option>
        <option value="Sun Valley">Sun Valley</option>
        <option value="Hawaiian Gardens">Hawaiian Gardens</option>
        <option value="W. Los Angeles">W. Los Angeles</option>
        <option value="Laguna Beach">Laguna Beach</option>
        <option value="San Fernando">San Fernando</option>
        <option value="Arleta">Arleta</option>
        <option value="Rancho Dominguez">Rancho Dominguez</option>
        <option value="Hawthorne">Hawthorne</option>
      </select>
    </div>

</div>
<!-- end map data -->

<!-- begin map -->
<div id="map_canvas"></div>
<!-- end map -->

</div>
<!-- end map container -->

        <!-- begin chartbeat -->
        <script type="text/javascript">
            var _sf_async_config = { uid: 33583, domain: 'projects.scpr.org', useCanonical:true };
            (function() {
                function loadChartbeat() {
                    window._sf_endpt = (new Date()).getTime();
                    var e = document.createElement('script');
                    e.setAttribute('language', 'javascript');
                    e.setAttribute('type', 'text/javascript');
                    e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
                    document.body.appendChild(e);
                };
                var oldonload = window.onload;
                window.onload = (typeof window.onload != 'function') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };
            })();
        </script>
        <!-- end chartbeat -->

        <!-- begin google analytics -->
        <script type="text/javascript">
            var hostName = 'projects.scpr.org';
            var _gaq = _gaq || [];
            _gaq.push(
                ['_setAccount', 'UA-624724-1'],
                ['_setDomainName', hostName],
                ['_setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['_setCustomVar', 7, 'PageType', 'Story', 3],
                ['_trackPageview'],
                ['b._setAccount', 'UA-18188937-11'],
                ['b._setDomainName', hostName],
                ['b._setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['b._setCustomVar', 7, 'PageType', 'Story', 3],
                ['b._trackPageview']
            );
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <!-- end google analytics -->