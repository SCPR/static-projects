<!DOCTYPE html>

<!-- begin doc -->
<html lang="en">

        <!-- begin header -->
        <head>

            <!-- begin meta -->
            <title>LAX Traffic Conditions | scpr.org</title>
            <link rel="shortcut icon" href="http://media.scpr.org/favicon.ico">
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <meta name="viewport" id="meta-viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">
            <!-- end meta -->

            <!-- begin css -->
            <style type="text/css">
                #map-container {width: 100%; height: 100%; padding: 5px;}
                #map-action-bar {width: 100%; height: 25px; display: block;}
                #map-action-bar .slowest {background-color: #000000;}
                #map-action-bar .slowest-inset {background-color: #711112; color: #ffffff; text-align: center; font-size: 22px; font-weight: bold;}
                #map-action-bar .slower {background-color: #711112;}
                #map-action-bar .faster {background-color: #f8cb18;}
                #map-action-bar .fastest {background-color: #4eb42a; color: #ffffff; text-align: center; font-size: 22px; font-weight: bold;}
                #map_canvas {width: 100%; height:600px; display: block;}
            </style>
            <!-- end css -->

            <!-- begin scripts -->
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAtS1OYyuRY0inb23BK0nuGId3FiOC6Rb8&sensor=false&amp;libraries=places"></script>
            <script type="text/javascript">
                var map;
                var latlng = new google.maps.LatLng(33.947917,-118.393849);

                $(document).ready(function(){
                    var options = {
                        zoom: 13,
                        center: latlng,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        scrollwheel: false,
                        draggable: true,
                        mapTypeControl: false,
                        navigationControl: true,
                        streetViewControl: false,
                        panControl: false,
                        scaleControl: true,
                        navigationControlOptions: {
                            style: google.maps.NavigationControlStyle.LARGE,
                            position: google.maps.ControlPosition.RIGHT_TOP
                        }
                    };

                    //write the map
                    var map = new google.maps.Map(document.getElementById('map_canvas'), options);

                    //traffic layer
                    var trafficLayer = new google.maps.TrafficLayer();
                    trafficLayer.setMap(map);

                    google.maps.event.addDomListener(map, 'idle', function() {
                      calculateCenter();
                    });

                    google.maps.event.addDomListener(window, 'resize', function() {
                      map.setCenter(centerLosAngeles);
                    });
                });
                //end main function

                // function to maintain center point of map
                function calculateCenter(){
                    center = map.getCenter();
                };

            </script>
            <!-- end scripts -->

        </head>

    <!-- begin body -->
    <body>
        <div id="map-container">
            <div id ="map-action-bar">
                <table width="100%" border="0" cellspacing="0" cellpadding="1">
                    <tbody>
                        <tr>
                            <td id="map-legend" style="width: 10%; height: 10px;" class="slowest"></td>
                            <td id="map-legend" style="width: 5%; height: 10px;" class="slowest-inset">Slow</td>
                            <td id="map-legend" style="width: 10%; height: 10px;" class="slowest"></td>
                            <td id="map-legend" style="width: 25%;" class="slower"></td>
                            <td id="map-legend" style="width: 25%;" class="faster"></td>
                            <td id="map-legend" style="width: 25%;" class="fastest">Fast</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="map_canvas"></div>
        </div>

        <!-- begin google analytics -->
        <script type="text/javascript">
            var currentPath = window.location.pathname;

            var pageType = _.find(scpr.GA_PAGE_MAPPING, function(v, k) {
                return currentPath.match(new RegExp(k)) !== null;
            });

            var _gaq = _gaq || [];
            _gaq.push(
                ['_setAccount', 'UA-624724-1'],
                ['_setDomainName', 'scpr.org'],
                ['_setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['_setCustomVar', 7, 'PageType', 'Story', 3],
                ['_trackPageview'],
                ['b._setAccount', 'UA-18188937-11'],
                ['b._setDomainName', 'scpr.org'],
                ['b._setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['b._setCustomVar', 7, 'PageType', 'Story', 3],
                ['b._trackPageview']
            );
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <!-- end google analytics -->

        <!-- begin chartbeat analytics -->
        <script type="text/javascript">
            var _sf_async_config = { uid: 33583, domain: 'scpr.org', useCanonical:true };
            (function() {
                function loadChartbeat() {
                    window._sf_endpt = (new Date()).getTime();
                    var e = document.createElement('script');
                    e.setAttribute('language', 'javascript');
                    e.setAttribute('type', 'text/javascript');
                    e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
                    document.body.appendChild(e);
                };
                var oldonload = window.onload;
                window.onload = (typeof window.onload != 'function') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };
            })();
        </script>
        <!-- end chartbeat analytics -->

    </body>
</html>