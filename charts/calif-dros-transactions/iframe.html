<!DOCTYPE html>

<!-- begin doc -->
<html lang="en">

<!-- begin header -->
<head>

    <!-- begin css -->
    <link href="http://www.scpr.org/assets/application.css" rel="stylesheet" type="text/css" media="all" />
    <link href="http://projects.scpr.org/static/static-files/css/highcharts-interactives/styles.css" rel="stylesheet" type="text/css" media="all" />

    <style type="text/css">
    #data-chart {width: 100%; height: 400px; margin: 0 auto 0 auto;}
    </style>

    <!-- end css -->

        <!-- begin base scripts -->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="//use.typekit.net/vtu6xsq.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
        <!-- end base scripts -->

</head>
<!-- end header -->

<!-- begin body -->
<body class="minimal">
    <div id="data-container">
        <div id="data-chart"></div>
    </div>

<script src="http://projects.scpr.org/static/static-files/scripts/tabletop.js"></script>
<script src="http://projects.scpr.org/static/static-files/scripts/highcharts.js"></script>
<script>

var jqueryNoConflict = jQuery;
var chart;

// begin
jqueryNoConflict(function () {
    jqueryNoConflict(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'data-chart',
                zoomType: 'xy',
                backgroundColor: '#fff',
                type: 'area',
                marginTop: 50
            },

            title: {
                text: 'Firearm transactions processed by the<br />California Department of Justice (1991-2011)'
            },
            subtitle: {
                text: '',
            },
            xAxis: {
                labels: {
                    formatter: function() {
                        return this.value;
                    }
                }
            },

            yAxis: [{

                // primary axis
                labels: {
                   formatter: function() {
                        return this.value / 1000 +'k';
                    },
                    style: {
                        color: '#2B2B2B'
                    }
                },
                title: {
                    text: 'Dealer Transactions',
                    style: {
                        color: '#2B2B2B'
                    }
                },
                max: 650000,
                tickPixelInterval: 100

            }],

            tooltip: {
                formatter: function() {
                    return '<strong>' + this.x + ':</strong> ' + Highcharts.numberFormat(this.y, 0, '.');
                }
            },

           plotOptions: {
                area: {
                    pointStart: 1991,
                    pointInterval: 1,
                    marker: {
                        enabled: false,
                        symbol: 'circle',
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true
                            }
                        }
                    }
                }
            },

            legend: {
                enabled: false,
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
                //x: -130,
                y: 0,
                floating: false,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },


            credits: {
                enabled: true,
                text: 'Source: California Dept. of Justice Bureau of Firearms',
                href: 'http://oag.ca.gov/sites/all/files/pdfs/firearms/forms/dros_chart.pdf?',

                position: {
                    align: 'right',
                    verticalAlign: 'bottom',
                    y: -5
                }
            },
            series: [{
                name: 'Dealer Transactions',
                color: '#002734',
                type: 'area',
                data: [489433, 559608, 642197, 599672,
                411668, 353872, 355136, 342540, 513418,
                386210, 353722, 352425, 290376, 315065,
                344847, 375573, 370628, 425244, 483872,
                498945, 601243]
            }]
        });
    });
});

</script>
<!-- end scripts -->

<!-- begin chartbeat -->
<script type="text/javascript">
    var _sf_async_config = { uid: 33583, domain: 'projects.scpr.org', useCanonical:true };
    (function() {
        function loadChartbeat() {
            window._sf_endpt = (new Date()).getTime();
            var e = document.createElement('script');
            e.setAttribute('language', 'javascript');
            e.setAttribute('type', 'text/javascript');
            e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
            document.body.appendChild(e);
        };
        var oldonload = window.onload;
        window.onload = (typeof window.onload != 'function') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };
    })();
</script>
<!-- end chartbeat -->

<!-- begin google analytics -->
<script type="text/javascript">
    var hostName = 'projects.scpr.org';
    var _gaq = _gaq || [];
    _gaq.push(
        ['_setAccount', 'UA-624724-1'],
        ['_setDomainName', hostName],
        ['_setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
        ['_setCustomVar', 7, 'PageType', 'Story', 3],
        ['_trackPageview'],
        ['b._setAccount', 'UA-18188937-11'],
        ['b._setDomainName', hostName],
        ['b._setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
        ['b._setCustomVar', 7, 'PageType', 'Story', 3],
        ['b._trackPageview']
    );
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<!-- end google analytics -->

<!-- begin webtrends stats -->
<script src="http://media.scpr.org/assets/scripts/webtrends.v2.js"></script>
<script>
    //<![CDATA[
        var _tag=new WebTrends();
        _tag.dcsGetId();
    //]]>
</script>
<script>
    //<![CDATA[
        _tag.dcsCustom=function(){
            // Add custom parameters here.
            //_tag.DCSext.param_name=param_value;
        }
    _tag.dcsCollect();
    //]]>
</script>
<noscript>
    <div><img alt="DCSIMG" id="DCSIMG" width="1" height="1" src="http://statse.webtrendslive.com/dcsyqctzwuz5bdsebpmwhwe8w_2p8d/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=9.3.0&amp;WT.dcssip=www.scpr.org"/></div>
</noscript>
<!-- end webtrends stats -->

<!-- begin comscore stats -->
<script>
    var _comscore = _comscore || [];
    _comscore.push({ c1: "2", c2: "6035974", c3: "", c4: "" });
    (function() {
    var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
    s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
    el.parentNode.insertBefore(s, el);
    })();
</script>
<noscript>
    <img src="http://b.scorecardresearch.com/p?c1=2&c2=6035974&c3=&c4=&c5=&c6=&c15=&cv=2.0&cj=1" />
</noscript>
<!-- end comscore stats -->

</body>
<!-- end body -->

</html>
<!-- end document -->