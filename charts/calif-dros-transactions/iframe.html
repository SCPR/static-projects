<!DOCTYPE html>

<!-- begin doc -->
<html lang="en">

<!-- begin header -->
<head>

    <!-- begin css -->
    <link href="http://www.scpr.org/assets/application.css" rel="stylesheet" type="text/css" media="all" />
    <link href="http://projects.scpr.org/static/static-files/css/highcharts-interactives/styles.css" rel="stylesheet" type="text/css" media="all" />

    <style type="text/css">
    #data-chart {width: 100%; height: 400px; margin: 0 auto 0 auto;}
    </style>

    <!-- end css -->

    <!-- begin kpcc foundation scripts -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <!-- end kpcc foundation scripts -->

</head>
<!-- end header -->

<!-- begin body -->
<body class="minimal">
    <div id="data-container">
        <div id="data-chart"></div>
    </div>

<script src="http://projects.scpr.org/static/static-files/scripts/tabletop.js"></script>
<script src="http://projects.scpr.org/static/static-files/scripts/highcharts.js"></script>
<script>

var jqueryNoConflict = jQuery;
var chart;

// begin
jqueryNoConflict(function () {
    jqueryNoConflict(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'data-chart',
                zoomType: 'xy',
                backgroundColor: '#fff',
                type: 'area',
                marginTop: 50
            },

            title: {
                text: 'Firearm transactions processed by the<br />California Department of Justice (1991-2011)'
            },
            subtitle: {
                text: '',
            },
            xAxis: {
                labels: {
                    formatter: function() {
                        return this.value;
                    }
                }
            },

            yAxis: [{

                // primary axis
                labels: {
                   formatter: function() {
                        return this.value / 1000 +'k';
                    },
                    style: {
                        color: '#2B2B2B'
                    }
                },
                title: {
                    text: 'Dealer Transactions',
                    style: {
                        color: '#2B2B2B'
                    }
                },
                max: 650000,
                tickPixelInterval: 100

            }],

            tooltip: {
                formatter: function() {
                    return '<strong>' + this.x + ':</strong> ' + Highcharts.numberFormat(this.y, 0, '.');
                }
            },

           plotOptions: {
                area: {
                    pointStart: 1991,
                    pointInterval: 1,
                    marker: {
                        enabled: false,
                        symbol: 'circle',
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true
                            }
                        }
                    }
                }
            },

            legend: {
                enabled: false,
                layout: 'horizontal',
                align: 'center',
                verticalAlign: 'bottom',
                //x: -130,
                y: 0,
                floating: false,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },


            credits: {
                enabled: true,
                text: 'Source: California Dept. of Justice Bureau of Firearms',
                href: 'http://oag.ca.gov/sites/all/files/pdfs/firearms/forms/dros_chart.pdf?',

                position: {
                    align: 'right',
                    verticalAlign: 'bottom',
                    y: -5
                }
            },
            series: [{
                name: 'Dealer Transactions',
                color: '#002734',
                type: 'area',
                data: [489433, 559608, 642197, 599672,
                411668, 353872, 355136, 342540, 513418,
                386210, 353722, 352425, 290376, 315065,
                344847, 375573, 370628, 425244, 483872,
                498945, 601243]
            }]
        });
    });
});

</script>
<!-- end scripts -->

</body>
<!-- end body -->

</html>
<!-- end document -->