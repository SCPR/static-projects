<!DOCTYPE html>

    <!-- begin doc -->
    <!--[if lt IE 7]>
        <html class="no-js lt-ie9 lt-ie8 lt-ie7">
    <![endif]-->

    <!--[if IE 7]>
        <html class="no-js lt-ie9 lt-ie8">
    <![endif]-->

    <!--[if IE 8]>
        <html class="no-js lt-ie9">
    <![endif]-->

    <!--[if gt IE 8]><!-->
        <html class="no-js" lang="en">
    <!--<![endif]-->

    <!-- begin header -->
    <head>
        <title>KPCC's Chartbuilder, based on Quartz's Chartbuilder</title>
        <link rel="shortcut icon" href="http://media.scpr.org/favicon.ico">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <link rel="apple-touch-icon" href="http://media.scpr.org/assets/images/icon.png">
        <meta name="format-detection" content="telephone=no"/>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <meta name="robots" content="#" />
        <meta name="description" content="KPCC's Chartbuilder is based on Quartz's Chartbuilder" />

        <!-- favicon updates through js -->
        <link id="favicon" rel="shortcut icon" type="image/png" href="" />

        <!-- libraries css -->
        <link rel="stylesheet" href="bower_components/html5-boilerplate/css/normalize.css" type="text/css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="bower_components/html5-boilerplate/css/main.css" type="text/css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="bower_components/really-simple-color-picker/colorPicker.css" type="text/css" media="screen" charset="utf-8">

        <!-- chartbuilder css -->
        <link rel="stylesheet" href="css/chartbuilder.css" type="text/css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="css/gneisschart.css" type="text/css" media="screen" charset="utf-8">
        <link rel="stylesheet" href="css/colorPicker.css" type="text/css" media="screen" charset="utf-8">

        <!-- begin base scripts -->
        <script type="text/javascript" src="//use.typekit.net/vtu6xsq.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
        <!-- end base scripts -->

    </head>

    <body>

        <!-- add your site or application content here -->
        <div id="interactiveContent">
            <div id="leftColumn" class="column">
                <div class="cbInner">
                    <div id="staticContainer">
                        <div id="chartContainer"></div>
                        <canvas id="canvas" width="1200px" height="676px"></canvas>
                        <canvas id="favicanvas" width="16px" height="16px"></canvas>
                    </div>
                </div>
            </div>
            <div id="rightColumn" class="column">
                <div class="cbInner">
                    <h1>ChartBuilder</h1>
                    <div id="chartOptions" class="interfaceCol">
                        <div id="datainput">
                            <div class="inputGroup">
                                <h2>1. Input your data</h2>
                                <span id="invalidDataSpan" class="hide">Warning: Data is Invalid</span>
                                <textarea id="csvInput" class="input-box" name="csvInput" rows="8"></textarea>
                            </div>
                            <div class="inputGroup">
                                <h4>Check the format of your data</h4>
                                <div id="dataTable" class="input-box">
                                    <table border=0>
                                        <tr><th>Header</th></tr>
                                        <tr><td>Data</td></tr>
                                    </table>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="optionBlock topOptionBlock">
                            <h2>2. Series Options</h2>
                            <div id="seriesItems"></div>
                        </div>
                        <div class="optionBlock">
                            <h2>3. Chart Options</h2>
                            <div class="optionGroup">
                                <label for="chart_title">Title</label>
                                <input type="text" name="chart_title" value="Your Title Here" id="chart_title">
                            </div>
                            <div class="optionGroup">
                                <label for="credit">Credit</label>
                                <input id="creditLine" type="text" name="credit" value="KPCC using Quartz's Chartbuilder">
                            </div>
                            <div class="optionGroup">
                                <label for="source">Source</label>
                                <input id="sourceLine" type="text" name="source" value="Something like Data: Bureau of Labor Statistics">
                                <cite>Something like "Data: Bureau of Labor Statistics" or "Data compiled by Factset"</cite>
                            </div>
                        </div>
                        <div class="optionBlock">
                            <h2>4. Right Axis Options</h2>
                            <div id="rightAxisControls">
                                <div class="optionGroup">
                                    <label for="right_axis_prefix">Right Axis Prefix</label>
                                    <input type="text" name="right_axis_prefix" value="" id="right_axis_prefix">
                                </div>
                                <div class="optionGroup">
                                    <label for="right_axis_suffix">Right Axis Suffix</label>
                                    <input type="text" name="right_axis_suffix" value="" id="right_axis_suffix">
                                </div>
                                <div class="optionGroup">
                                    <label for="right_axis_tick_num">Number of Y Axis Ticks</label>
                                    <select name="right_axis_tick_num" id="right_axis_tick_num" size="1">
                                        <option>3</option>
                                        <option selected >4</option>
                                        <option>5</option>
                                        <option>6</option>
                                        <option>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                        <option>10</option>
                                    </select>
                                </div>
                                <div class="optionGroup">
                                    <label for="right_axis_max">Right Axis Max</label>
                                    <input type="text" name="right_axis_max" value="" id="right_axis_max"></div>
                                    <div class="optionGroup">
                                        <label for="right_axis_min">Right Axis Min</label>
                                        <input type="text" name="right_axis_min" value="" id="right_axis_min">
                                    </div>
                                    <div class="optionGroup advanced">
                                        <label for="right_axis_tick_override">Right Axis Tick Override</label>
                                        <input type="text" name="right_axis_tick_override" value="" id="right_axis_tick_override">
                                    </div>
                                </div>
                            </div>
                            <div id="leftAxisControls" class="optionBlock hide">
                                <h2>4+ Left Axis Options</h2>
                                <div class="optionGroup">
                                    <label for="left_axis_prefix">Left Axis Prefix</label>
                                    <input type="text" name="left_axis_prefix" value="" id="left_axis_prefix">
                                </div>
                                <div class="optionGroup">
                                    <label for="left_axis_suffix">Left Axis Suffix</label>
                                    <input type="text" name="left_axis_suffix" value="" id="left_axis_suffix">
                                </div>
                                <div class="optionGroup">
                                    <label for="left_axis_max">Left Axis Max</label>
                                    <input type="text" name="left_axis_max" value="" id="left_axis_max">
                                </div>
                                <div class="optionGroup">
                                    <label for="left_axis_min">Left Axis Min</label>
                                    <input type="text" name="left_axis_min" value="" id="left_axis_min">
                                </div>
                                <div class="optionGroup">
                                    <label for="left_axis_tick_override">Left Axis Tick Override</label>
                                    <input type="text" name="left_axis_tick_override" value="" id="left_axis_tick_override" >
                                </div>
                            </div>
                            <div class="optionBlock">
                                <h2>5. Bottom Axis Options</h2>
                                <div class="optionGroup showonlywith-date">
                                    <label for="x_axis_tick_date_frequency">Tick date frequency</label>
                                    <select name="x_axis_tick_date_frequency" id="x_axis_tick_date_frequency" size="1">
                                        <option selected>auto</option>
                                        <option>1 hour</option>
                                        <option>2 hours</option>
                                        <option>3 hours</option>
                                        <option>4 hours</option>
                                        <option>6 hours</option>
                                        <option>1 day</option>
                                        <option>1 week</option>
                                        <option>1 month</option>
                                        <option>3 months</option>
                                        <option>6 months</option>
                                        <option>1 year</option>
                                        <option>5 years</option>
                                        <option>10 years</option>
                                        <option>20 years</option>
                                        <option>50 years</option>
                                        <option>100 years</option>
                                    </select>
                                </div>
                                <div class="optionGroup showonlywith-date">
                                    <label for="x_axis_date_format">X Axis Date Format</label>
                                    <select name="x_axis_date_format" id="x_axis_date_format">
                                        <option value="mmddyyyy">2/25/2012</option>
                                        <option value="ddmmyyyy">25/2/2012</option>
                                        <option value="mmdd">2/25</option>
                                        <option value="Mdd">Feb. 25</option>
                                        <option value="ddM">25 Feb.</option>
                                        <option value="mmyy">2/13</option>
                                        <option value="yy">'13</option>
                                        <option value="yyyy">2013</option>
                                        <option value="QJan">Q2 (Jan. FY)</option>
                                        <option value="QJul">Q2 (July FY)</option>
                                        <option value="MM">February</option>
                                        <option selected value="M">Feb.</option>
                                        <option value="hmm">3:27</option>
                                    </select>
                                </div>
                                <div class="optionGroup showonlywith-ordinal">No options available</div>
                            </div>
                            <div class="optionBlock full">
                                <h2>4. Export</h2>
                                <div class="updateButton" id="createImageButton">
                                    <p>Create Image of Chart</p>
                                </div>
                                <div id="downloadLinksDiv" class="downloadLinks hide">
                                    <a download="new_chart.png" id="downloadImageLink" class="downloadLink" href="#" target="_blank">Download&nbsp;Image&nbsp;of&nbsp;Chart</a> or
                                    <a download="new_chart.svg" id="downloadSVGLink" class="downloadLink" href="#" target="_blank">Download&nbsp;SVG&nbsp;of&nbsp;Chart</a>
                                </div>
                            </div>
                            <div class="optionBlock full">
                                <h4>5. Copy the HTML table of your data (if you want)</h4>
                                <textarea  class="input-box"  id="table-html" type="text" rows="10"></textarea>
                                <div class="previousCharts hide">
                                    <div class="optionGroup">
                                        <label for="previous_charts">Previously Created Charts</label>
                                    <select name="previous_charts" id="previous_charts"></select>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div id="currentSeries" class="interfaceCol"></div>
                </div>
            </div>
            <div id="blankColumn" class="column"></div>
            <div class="clearfix"></div>
        </div>

        <!-- begin scripts -->
        <script src="bower_components/modernizr/modernizr.js" charset="utf-8"></script>
        <script src="bower_components/jquery/jquery.min.js" charset="utf-8"></script>
        <script src="bower_components/d3/d3.v2.min.js" charset="utf-8"></script>
        <script src="bower_components/canvg/canvg.js" charset="utf-8"></script>
        <script src="bower_components/rgbcolor/index.js" charset="utf-8"></script>
        <script src="bower_components/jquery-csv/index.js" charset="utf-8"></script>
        <script src="bower_components/really-simple-color-picker/jquery.colorPicker.min.js" charset="utf-8"></script>
        <script src="bower_components/webfontloader/target/webfont.js" type="text/javascript" charset="utf-8"></script>
        <script src="bower_components/sugar/release/sugar.min.js" charset="utf-8"></script>

        <!-- chartbuilder js -->
        <script src="js/gneisschart.js" charset="utf-8"></script>
        <script src="js/chartbuilder.js"></script>

        <!-- local confuf scripts -->
        <script type="text/javascript">
        var kpccConfig = {
            colors: ["#f17b21", "#007fa6", "#66a61e", "#7570b3", "#1b9e77", "#e7298a", "#e6ab02"],
            creditline: "KPCC using Quartz\'s Chartbuilder"
        };

        //this loads the webfonts and starts chartbuilder once they're present
        WebFont.load({
            custom: {
                families: ["Cutive"]
            },
            active: function(name) {
                $(document).ready(function() {
                    ChartBuilder.start(kpccConfig);
                });
            }
        });
        </script>
        <!-- end scripts -->

        <!-- begin chartbeat -->
        <script type="text/javascript">
            var _sf_async_config = { uid: 33583, domain: 'projects.scpr.org', useCanonical:true };
            (function() {
                function loadChartbeat() {
                    window._sf_endpt = (new Date()).getTime();
                    var e = document.createElement('script');
                    e.setAttribute('language', 'javascript');
                    e.setAttribute('type', 'text/javascript');
                    e.setAttribute('src','//static.chartbeat.com/js/chartbeat.js');
                    document.body.appendChild(e);
                };
                var oldonload = window.onload;
                window.onload = (typeof window.onload != 'function') ? loadChartbeat : function() { oldonload(); loadChartbeat(); };
            })();
        </script>
        <!-- end chartbeat -->

        <!-- begin google analytics -->
        <script type="text/javascript">
            var hostName = 'projects.scpr.org';
            var _gaq = _gaq || [];
            _gaq.push(
                ['_setAccount', 'UA-624724-1'],
                ['_setDomainName', hostName],
                ['_setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['_setCustomVar', 7, 'PageType', 'Story', 3],
                ['_trackPageview'],
                ['b._setAccount', 'UA-18188937-11'],
                ['b._setDomainName', hostName],
                ['b._setCustomVar', 6, 'Station', 'Southern California Public Radio', 2],
                ['b._setCustomVar', 7, 'PageType', 'Story', 3],
                ['b._trackPageview']
            );
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
        <!-- end google analytics -->

        <!-- begin webtrends stats -->
        <script src="http://media.scpr.org/assets/scripts/webtrends.v2.js"></script>
        <script>
            //<![CDATA[
                var _tag=new WebTrends();
                _tag.dcsGetId();
            //]]>
        </script>
        <script>
            //<![CDATA[
                _tag.dcsCustom=function(){
                    // Add custom parameters here.
                    //_tag.DCSext.param_name=param_value;
                }
            _tag.dcsCollect();
            //]]>
        </script>
        <noscript>
            <div><img alt="DCSIMG" id="DCSIMG" width="1" height="1" src="http://statse.webtrendslive.com/dcsyqctzwuz5bdsebpmwhwe8w_2p8d/njs.gif?dcsuri=/nojavascript&amp;WT.js=No&amp;WT.tv=9.3.0&amp;WT.dcssip=www.scpr.org"/></div>
        </noscript>
        <!-- end webtrends stats -->

        <!-- begin comscore stats -->
        <script>
            var _comscore = _comscore || [];
            _comscore.push({ c1: "2", c2: "6035974", c3: "", c4: "" });
            (function() {
            var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
            s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
            el.parentNode.insertBefore(s, el);
            })();
        </script>
        <noscript>
            <img src="http://b.scorecardresearch.com/p?c1=2&c2=6035974&c3=&c4=&c5=&c6=&c15=&cv=2.0&cj=1" />
        </noscript>
        <!-- end comscore stats -->

  </body>
</html>